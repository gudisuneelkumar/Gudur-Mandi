<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PashuSetu ‚Äî Livestock Marketplace</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card:hover{transform:translateY(-4px);box-shadow:0 10px 25px rgba(0,0,0,.12)}
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- Header -->
  <header class="bg-green-700 text-white">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="text-2xl font-bold">üêÑ PashuSetu</div>
      <nav class="space-x-6 text-sm md:text-base">
        <a href="#buy" class="hover:underline">Buy</a>
        <a href="#sell" class="hover:underline">Sell</a>
        <a href="#learn" class="hover:underline">Breeds Guide</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-r from-green-600 to-emerald-500 text-white">
    <div class="max-w-6xl mx-auto px-4 py-14 grid md:grid-cols-2 gap-8 items-center">
      <div>
        <h1 class="text-4xl md:text-5xl font-extrabold mb-4">India's Trusted Livestock Marketplace</h1>
        <p class="mb-6 text-lg">Buy & sell cows, buffalo, goats and country chickens directly from farmers. Verified sellers. Fair prices. Safe payments.</p>
        <a href="#sell" class="bg-white text-green-700 px-6 py-3 rounded-xl font-semibold"><h2>Sell Your Animal</h2>

<form id="sellForm">
  <input id="sellerName" placeholder="Your Name" required><br><br>
  <input id="phone" placeholder="Phone Number" required><br><br>
  <input id="animalType" placeholder="Animal (Cow/Goat/Buffalo)" required><br><br>
  <input id="price" placeholder="Price ‚Çπ" required><br><br>
  <input type="file" id="photo" accept="image/*" required><br><br>
  <button type="submit">Post Listing</button>
</form>

<hr>

<h2>Available Animals</h2>
<div id="listings"></div>

  <!-- Listings -->
  <section id="buy" class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-3xl font-bold mb-6">Available Animals</h2>
    <div id="listings" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </section>

  <!-- Sell Form -->
  <section id="sell" class="bg-white py-12 border-t">
    <div class="max-w-4xl mx-auto px-4">
      <h2 class="text-3xl font-bold mb-6">Post Your Animal (Free)</h2>
      <form id="sellForm" class="grid md:grid-cols-2 gap-4">
        <input required placeholder="Farmer Name" id="name" class="border p-3 rounded-xl" />
        <input required placeholder="Phone Number" id="phone" class="border p-3 rounded-xl" />
        <input required placeholder="Location (Village/City)" id="location" class="border p-3 rounded-xl" />
        <select id="type" class="border p-3 rounded-xl">
          <option>Cow</option>
          <option>Buffalo</option>
          <option>Goat</option>
          <option>Country Chicken</option>
        </select>
        <input placeholder="Breed (e.g., Gir, HF, Murrah)" id="breed" class="border p-3 rounded-xl" />
        <input placeholder="Milk Yield (litres/day)" id="milk" class="border p-3 rounded-xl" />
        <input required placeholder="Expected Price (‚Çπ)" id="price" class="border p-3 rounded-xl" />
        <input placeholder="Last Calving Date" id="calving" class="border p-3 rounded-xl" />
        <textarea placeholder="Extra details (pregnant, vaccinated, etc.)" id="details" class="border p-3 rounded-xl md:col-span-2"></textarea>
        <button class="bg-green-700 text-white py-3 rounded-xl md:col-span-2 font-semibold">Submit Listing</button>
      </form>
      <p class="text-sm text-gray-500 mt-3">Note: Demo site ‚Äî data saved only in your browser.</p>
    </div>
  </section>

  <!-- Learn -->
  <section id="learn" class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-3xl font-bold mb-6">Popular Breeds</h2>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-white p-5 rounded-2xl shadow"> <h3 class="font-bold text-xl">Gir Cow</h3><p>High A2 milk, heat tolerant. Popular in Gujarat & South India.</p></div>
      <div class="bg-white p-5 rounded-2xl shadow"> <h3 class="font-bold text-xl">HF (Holstein Friesian)</h3><p>High milk yield. Needs good feed and shed management.</p></div>
      <div class="bg-white p-5 rounded-2xl shadow"> <h3 class="font-bold text-xl">Murrah Buffalo</h3><p>Very high fat milk. Highest demand across India.</p></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white mt-10">
    <div class="max-w-6xl mx-auto px-4 py-8 grid md:grid-cols-2 gap-6">
      <div>
        <div class="text-2xl font-bold mb-2">PashuSetu</div>
        <p>Connecting farmers and buyers across India.</p>
      </div>
      <div>
        <p class="mb-2">Contact (WhatsApp):</p>
        <a class="bg-green-600 px-4 py-2 rounded-xl inline-block" href="https://wa.me/919000000000">Chat Now</a>
      </div>
    </div>
    <div class="text-center text-gray-400 pb-4 text-sm">¬© 2026 PashuSetu</div>
  </footer>

  <script>
    const demo = [
      {type:'Cow',breed:'Gir',milk:'10',location:'Tumakuru',price:'85000',name:'Ramesh'},
      {type:'Buffalo',breed:'Murrah',milk:'12',location:'Kolar',price:'105000',name:'Suresh'},
      {type:'Cow',breed:'HF',milk:'18',location:'Mysuru',price:'95000',name:'Mahesh'}
    ];

    function render(){
      const el=document.getElementById('listings');
      const data=[...demo,...(JSON.parse(localStorage.getItem('animals')||'[]'))];
      el.innerHTML='';
      data.forEach(a=>{
        el.innerHTML+=`<div class='bg-white p-5 rounded-2xl shadow card transition'>
          <div class='text-lg font-bold mb-1'>${a.type} ‚Äî ${a.breed||''}</div>
          <div class='text-sm text-gray-600 mb-2'>Location: ${a.location}</div>
          <div>Milk Yield: <b>${a.milk||'-'} L/day</b></div>
          <div class='mt-2 text-2xl font-bold text-green-700'>‚Çπ${a.price}</div>
          <div class='mt-2 text-sm'>Seller: ${a.name}</div>
          <a href='https://wa.me/919000000000' class='mt-3 inline-block bg-green-700 text-white px-4 py-2 rounded-xl'>Contact</a>
        </div>`
      })
    }

    document.getElementById('sellForm').addEventListener('submit',e=>{
      e.preventDefault();
      const a={
        name:name.value,phone:phone.value,location:location.value,type:type.value,breed:breed.value,milk:milk.value,price:price.value,calving:calving.value,details:details.value
      };
      const arr=JSON.parse(localStorage.getItem('animals')||'[]');
      arr.push(a);
      localStorage.setItem('animals',JSON.stringify(arr));
      alert('Listing posted! It is visible below.');
      e.target.reset();
      render();
    });

    render();
  </script>
  <!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

/* YOUR FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyAY_zjbTFPvW-4uwSIVaQD7n4roVk-EoQg",
  authDomain: "andhra-mandi.firebaseapp.com",
  projectId: "andhra-mandi",
  storageBucket: "andhra-mandi.firebasestorage.app",
  messagingSenderId: "929304181621",
  appId: "1:929304181621:web:280644aa55ca14358db13c"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const storage = getStorage(app);

/* ---------- FORM SUBMIT ---------- */
document.getElementById("sellForm")?.addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("sellerName").value;
  const phone = document.getElementById("phone").value;
  const price = document.getElementById("price").value;
  const animal = document.getElementById("animalType").value;
  const file = document.getElementById("photo").files[0];

  if (!file) {
    alert("Please upload animal photo");
    return;
  }

  const imageRef = ref(storage, "animals/" + Date.now() + "-" + file.name);
  await uploadBytes(imageRef, file);
  const imageURL = await getDownloadURL(imageRef);

  await addDoc(collection(db, "listings"), {
    name,
    phone,
    price,
    animal,
    imageURL,
    created: new Date()
  });

  alert("Animal listed successfully!");
  location.reload();
});

/* ---------- LOAD LISTINGS ---------- */
async function loadListings() {
  const container = document.getElementById("listings");
  if (!container) return;

  container.innerHTML = "Loading animals...";

  const q = query(collection(db, "listings"), orderBy("created", "desc"));
  const snapshot = await getDocs(q);

  container.innerHTML = "";

  snapshot.forEach((doc) => {
    const data = doc.data();

    container.innerHTML += `
      <div class="animal-card">
        <img src="${data.imageURL}" style="width:100%;height:220px;object-fit:cover;border-radius:10px;">
        <h3>${data.animal}</h3>
        <p><b>Price:</b> ‚Çπ${data.price}</p>
        <p><b>Seller:</b> ${data.name}</p>
        <a href="tel:${data.phone}">üìû Call Seller</a><br>
        <a href="https://wa.me/91${data.phone}" target="_blank">üí¨ WhatsApp</a>
      </div>
    `;
  });
}

loadListings();
</script>
</body>
</html>

